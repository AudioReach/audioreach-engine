#[[
   @file CMakeLists.txt

   @brief

   @copyright
   Copyright (c) Qualcomm Innovation Center, Inc. All Rights Reserved.
   SPDX-License-Identifier: BSD-3-Clause-Clear

]]
cmake_minimum_required(VERSION 3.10)

set(VERSION_H_PATH "../autogen/dsp_version.h")
message(STATUS "Generating ${VERSION_H_PATH}")

#Get the GCC version as a hex number and write into the auto generated header file
include(version.cmake)
set(header_comment "//This file is auto-generated. Please do not edit this file.\n\n")
set(header_content "#define SHARED_LIB_API__BUILD_TOOLS_VERSION ${CURRENT_GCC_VERSION}\n")
string(CONCAT header_file "${header_comment}" "${header_content}")

file(WRITE "${VERSION_H_PATH}" "${header_file}")

#Include directories
set (lib_incs_list
     ${LIB_ROOT}/inc
     ../autogen
    )

#Add the source files
set (lib_srcs_list
     ${LIB_ROOT}/src/shared_lib_api.c
    )

#Call spf_build_static_library to generate the static library
spf_build_static_library(SharedLibApi
                         "${lib_incs_list}"
                         "${lib_srcs_list}"
                         "${lib_defs_list}"
                         "${lib_flgs_list}"
                         "${lib_link_libs_list}"
                        )
